const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/HeroBanner.B7rXjYZs.js","_astro/Providers.xGLPAwM3.js","_astro/index.Ba-IbuDT.js","_astro/createLucideIcon.BjkHRYOJ.js","_astro/chevron-right.DsYtaCB9.js","_astro/PopularCategories.DKZUPgr_.js","_astro/CategorySidebar.BwIibZxB.js","_astro/ProductGrid.mfbSb4ot.js","_astro/ProductModal.DxoQOmvh.js","_astro/x.wBzUDWHC.js","_astro/plus.CvorEbqV.js","_astro/CartSidebar.CjWP9-Ya.js","_astro/trash-2.D7iKBQ7P.js"])))=>i.map(i=>d[i]);
import{g as D,a as U,q as R,l as B,o as N,c as z,d as I,b as M,j as c,_ as E,P as W}from"./Providers.xGLPAwM3.js";import{r as b,g as V,R as G}from"./index.Ba-IbuDT.js";import{u as Q,c as K,o as X,p as Y}from"./createLucideIcon.BjkHRYOJ.js";function k(e=100){return Q({queryKey:["catalog",e],queryFn:async()=>{const[r,o,n]=await Promise.all([D(R(z(I,"produtos"),N("createdAt","desc"),B(e))),D(R(z(I,"categorias"),N("nome"))),U(M(I,"config","layout"))]),a=r.docs.map(d=>({id:d.id,...d.data()})),t=o.docs.map(d=>({id:d.id,...d.data()})),s=n.exists()?n.data():{},h={logo:s.logo||"",banners:(s.banners||[]).map(d=>({url:d,alt:"Banner Rocha Brindes"})),promotions:s.promotions||[],popups:s.popups||[]};return{products:a,categories:t,layout:h}},staleTime:10*60*1e3,gcTime:30*60*1e3,placeholderData:Z()})}function Z(){try{const e=localStorage.getItem("catalog-cache");if(e){const r=JSON.parse(e);if(Date.now()-r.timestamp<10*60*1e3)return r.catalog}}catch{return}}function ee(e){try{localStorage.setItem("catalog-cache",JSON.stringify({catalog:e,timestamp:Date.now()}))}catch{console.warn("Failed to cache catalog")}}const te={},P=e=>{let r;const o=new Set,n=(p,f)=>{const v=typeof p=="function"?p(r):p;if(!Object.is(v,r)){const g=r;r=f??(typeof v!="object"||v===null)?v:Object.assign({},r,v),o.forEach(y=>y(r,g))}},a=()=>r,d={setState:n,getState:a,getInitialState:()=>m,subscribe:p=>(o.add(p),()=>o.delete(p)),destroy:()=>{(te?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},m=r=e(n,a,d);return d},re=e=>e?P(e):P;var L={exports:{}},H={},T={exports:{}},A={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=b;function oe(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ne=typeof Object.is=="function"?Object.is:oe,ae=_.useState,se=_.useEffect,ie=_.useLayoutEffect,ce=_.useDebugValue;function le(e,r){var o=r(),n=ae({inst:{value:o,getSnapshot:r}}),a=n[0].inst,t=n[1];return ie(function(){a.value=o,a.getSnapshot=r,C(a)&&t({inst:a})},[e,o,r]),se(function(){return C(a)&&t({inst:a}),e(function(){C(a)&&t({inst:a})})},[e]),ce(o),o}function C(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!ne(e,o)}catch{return!0}}function ue(e,r){return r()}var de=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ue:le;A.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:de;T.exports=A;var me=T.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w=b,fe=me;function he(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ge=typeof Object.is=="function"?Object.is:he,pe=fe.useSyncExternalStore,ve=w.useRef,ye=w.useEffect,Se=w.useMemo,be=w.useDebugValue;H.useSyncExternalStoreWithSelector=function(e,r,o,n,a){var t=ve(null);if(t.current===null){var s={hasValue:!1,value:null};t.current=s}else s=t.current;t=Se(function(){function d(g){if(!m){if(m=!0,p=g,g=n(g),a!==void 0&&s.hasValue){var y=s.value;if(a(y,g))return f=y}return f=g}if(y=f,ge(p,g))return y;var u=n(g);return a!==void 0&&a(y,u)?(p=g,y):(p=g,f=u)}var m=!1,p,f,v=o===void 0?null:o;return[function(){return d(r())},v===null?void 0:function(){return d(v())}]},[r,o,n,a]);var h=pe(e,t[0],t[1]);return ye(function(){s.hasValue=!0,s.value=h},[h]),be(h),h};L.exports=H;var xe=L.exports;const _e=V(xe),$={},{useDebugValue:Ee}=G,{useSyncExternalStoreWithSelector:je}=_e;let O=!1;const we=e=>e;function Ie(e,r=we,o){($?"production":void 0)!=="production"&&o&&!O&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),O=!0);const n=je(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,o);return Ee(n),n}const Ce=e=>{($?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof e=="function"?re(e):e,o=(n,a)=>Ie(r,n,a);return Object.assign(o,r),o},De=e=>Ce,Re={};function Ne(e,r){let o;try{o=e()}catch{return}return{getItem:a=>{var t;const s=d=>d===null?null:JSON.parse(d,void 0),h=(t=o.getItem(a))!=null?t:null;return h instanceof Promise?h.then(s):s(h)},setItem:(a,t)=>o.setItem(a,JSON.stringify(t,void 0)),removeItem:a=>o.removeItem(a)}}const j=e=>r=>{try{const o=e(r);return o instanceof Promise?o:{then(n){return j(n)(o)},catch(n){return this}}}catch(o){return{then(n){return this},catch(n){return j(n)(o)}}}},ze=(e,r)=>(o,n,a)=>{let t={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:l=>l,version:0,merge:(l,S)=>({...S,...l}),...r},s=!1;const h=new Set,d=new Set;let m;try{m=t.getStorage()}catch{}if(!m)return e((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),o(...l)},n,a);const p=j(t.serialize),f=()=>{const l=t.partialize({...n()});let S;const i=p({state:l,version:t.version}).then(x=>m.setItem(t.name,x)).catch(x=>{S=x});if(S)throw S;return i},v=a.setState;a.setState=(l,S)=>{v(l,S),f()};const g=e((...l)=>{o(...l),f()},n,a);let y;const u=()=>{var l;if(!m)return;s=!1,h.forEach(i=>i(n()));const S=((l=t.onRehydrateStorage)==null?void 0:l.call(t,n()))||void 0;return j(m.getItem.bind(m))(t.name).then(i=>{if(i)return t.deserialize(i)}).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==t.version){if(t.migrate)return t.migrate(i.state,i.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return i.state}).then(i=>{var x;return y=t.merge(i,(x=n())!=null?x:g),o(y,!0),f()}).then(()=>{S?.(y,void 0),s=!0,d.forEach(i=>i(y))}).catch(i=>{S?.(void 0,i)})};return a.persist={setOptions:l=>{t={...t,...l},l.getStorage&&(m=l.getStorage())},clearStorage:()=>{m?.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>u(),hasHydrated:()=>s,onHydrate:l=>(h.add(l),()=>{h.delete(l)}),onFinishHydration:l=>(d.add(l),()=>{d.delete(l)})},u(),y||g},Pe=(e,r)=>(o,n,a)=>{let t={storage:Ne(()=>localStorage),partialize:u=>u,version:0,merge:(u,l)=>({...l,...u}),...r},s=!1;const h=new Set,d=new Set;let m=t.storage;if(!m)return e((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${t.name}', the given storage is currently unavailable.`),o(...u)},n,a);const p=()=>{const u=t.partialize({...n()});return m.setItem(t.name,{state:u,version:t.version})},f=a.setState;a.setState=(u,l)=>{f(u,l),p()};const v=e((...u)=>{o(...u),p()},n,a);a.getInitialState=()=>v;let g;const y=()=>{var u,l;if(!m)return;s=!1,h.forEach(i=>{var x;return i((x=n())!=null?x:v)});const S=((l=t.onRehydrateStorage)==null?void 0:l.call(t,(u=n())!=null?u:v))||void 0;return j(m.getItem.bind(m))(t.name).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==t.version){if(t.migrate)return[!0,t.migrate(i.state,i.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,i.state];return[!1,void 0]}).then(i=>{var x;const[q,J]=i;if(g=t.merge(J,(x=n())!=null?x:v),o(g,!0),q)return p()}).then(()=>{S?.(g,void 0),g=n(),s=!0,d.forEach(i=>i(g))}).catch(i=>{S?.(void 0,i)})};return a.persist={setOptions:u=>{t={...t,...u},u.storage&&(m=u.storage)},clearStorage:()=>{m?.removeItem(t.name)},getOptions:()=>t,rehydrate:()=>y(),hasHydrated:()=>s,onHydrate:u=>(h.add(u),()=>{h.delete(u)}),onFinishHydration:u=>(d.add(u),()=>{d.delete(u)})},t.skipHydration||y(),g||v},Oe=(e,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((Re?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),ze(e,r)):Pe(e,r),ke=Oe,F=De()(ke((e,r)=>({items:[],isOpen:!1,count:0,category:"Todos",search:"",add:o=>{const n=r().items,t=n.find(s=>s.id===o.id)?n.map(s=>s.id===o.id?{...s,quantity:s.quantity+1}:s):[...n,{...o,quantity:1}];e({items:t,count:t.reduce((s,h)=>s+h.quantity,0)})},remove:o=>{const n=r().items.filter(a=>a.id!==o);e({items:n,count:n.reduce((a,t)=>a+t.quantity,0)})},updateQuantity:(o,n)=>{const a=r().items.map(t=>t.id===o?{...t,quantity:n}:t);e({items:a,count:a.reduce((t,s)=>t+s.quantity,0)})},clear:()=>e({items:[],count:0}),toggle:()=>e({isOpen:!r().isOpen}),setCategory:o=>e({category:o}),setSearch:o=>e({search:o})}),{name:"cart-storage"}));/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=K("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);function He(){const{count:e,toggle:r}=F(),{data:o,isLoading:n}=k(),a=o?.layout.logo,t=a?X(a,"public"):"";return c.jsx("header",{className:"sticky top-0 z-40 bg-white shadow-md border-b border-gray-100",children:c.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex items-center justify-between h-20",children:[n||!t?c.jsx("div",{className:"h-14 md:h-16 w-64 bg-gray-200 animate-pulse rounded"}):c.jsx("img",{src:t,alt:"Rocha Brindes",className:"h-14 md:h-16 w-auto object-contain",loading:"eager"}),c.jsxs("button",{onClick:r,className:"relative p-3 bg-primary hover:bg-primary-dark text-white rounded-full transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105","aria-label":"Abrir carrinho",children:[c.jsx(Le,{size:24,strokeWidth:2.5}),e>0&&c.jsx("span",{className:"absolute -top-2 -right-2 bg-accent text-dark font-bold text-xs min-w-[24px] h-[24px] flex items-center justify-center rounded-full border-3 border-white shadow-md",children:e})]})]})})})}const Te=b.lazy(()=>E(()=>import("./HeroBanner.B7rXjYZs.js"),__vite__mapDeps([0,1,2,3,4]))),Ae=b.lazy(()=>E(()=>import("./PopularCategories.DKZUPgr_.js"),__vite__mapDeps([5,1,2,3]))),$e=b.lazy(()=>E(()=>import("./CategorySidebar.BwIibZxB.js"),__vite__mapDeps([6,1,2,3]))),Fe=b.lazy(()=>E(()=>import("./ProductGrid.mfbSb4ot.js"),__vite__mapDeps([7,1,2,3]))),qe=b.lazy(()=>E(()=>import("./ProductModal.DxoQOmvh.js"),__vite__mapDeps([8,1,2,3,9,10]))),Je=b.lazy(()=>E(()=>import("./CartSidebar.CjWP9-Ya.js"),__vite__mapDeps([11,1,2,3,9,10,12])));function Ue(){const{data:e,isLoading:r}=k(),{category:o,search:n,add:a,setCategory:t,setSearch:s}=F(),[h,d]=b.useState(null);b.useEffect(()=>{if(e){ee(e);const f=[];e.layout.logo&&f.push(e.layout.logo),e.layout.banners[0]?.url&&f.push(e.layout.banners[0].url),Y(f)}},[e]);const m=b.useMemo(()=>e?e.products.filter(f=>{const v=o==="Todos"||f.categorias?.includes(o),g=!n||f.nome.toLowerCase().includes(n.toLowerCase())||f.id.toLowerCase().includes(n.toLowerCase());return v&&g}):[],[e,o,n]),p=c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(9)].map((f,v)=>c.jsx("div",{className:"bg-white rounded-xl h-96 animate-pulse"},v))});return c.jsxs(c.Fragment,{children:[c.jsx(He,{}),c.jsx("main",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsx(b.Suspense,{fallback:c.jsx("div",{className:"mb-8 h-40 md:h-56 rounded-2xl bg-gray-100 animate-pulse"}),children:c.jsx(Te,{banners:e?.layout.banners||[]})}),c.jsx(b.Suspense,{fallback:null,children:c.jsx(Ae,{categories:e?.categories.filter(f=>f.popular).slice(0,4)||[],onSelect:t})}),c.jsxs("div",{className:"grid lg:grid-cols-[280px_1fr] gap-8",children:[c.jsx(b.Suspense,{fallback:null,children:c.jsx($e,{categories:e?.categories.map(f=>f.nome)||[],selected:o,onSelect:t,search:n,onSearch:s})}),c.jsx("div",{children:r?p:m.length===0?c.jsx("div",{className:"text-center py-20",children:c.jsx("p",{className:"text-xl text-gray-500",children:"Nenhum produto encontrado"})}):c.jsx(b.Suspense,{fallback:p,children:c.jsx(Fe,{products:m,onView:d,onAdd:a})})})]})]})}),c.jsxs(b.Suspense,{fallback:null,children:[h&&c.jsx(qe,{product:h,onClose:()=>d(null)}),c.jsx(Je,{})]})]})}function Ve(){return c.jsx(W,{children:c.jsx(Ue,{})})}export{Ve as H,Le as S,F as u};
