import{j as e}from"./Providers.xGLPAwM3.js";import{r as n}from"./index.Ba-IbuDT.js";import{o}from"./createLucideIcon.BjkHRYOJ.js";import{u as j,S as v}from"./Home.LCAjuRqf.js";import{X as N}from"./x.wBzUDWHC.js";import{M as w,P as k}from"./plus.CvorEbqV.js";const Q=n.memo(function({product:r,onClose:c}){const{add:b}=j(),[d,m]=n.useState(1),s=n.useMemo(()=>{const a=[];return r.imagem_url&&a.push({label:"Principal",url:o(r.imagem_url,"public")}),r.variacoes?.length&&r.variacoes.forEach(t=>{t.imagem_url&&a.push({label:t.cor,url:o(t.imagem_url,"public"),variation:t})}),!a.length&&r.imagens_urls?.length&&r.imagens_urls.forEach((t,l)=>{a.push({label:l===0?"Imagem":`Imagem ${l+1}`,url:o(t,"public")})}),a},[r]),[x,g]=n.useState(0),i=s[x]||s[0],h=()=>{const a=i?.variation?.cor;for(let t=0;t<d;t++)b({...r,cor:a});c()},u=()=>{m(a=>a+1)},p=()=>{m(a=>Math.max(1,a-1))},f=a=>{const t=parseInt(a.target.value)||1;m(Math.max(1,t))};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 px-4",children:e.jsxs("div",{className:"relative bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[e.jsx("button",{onClick:c,className:"absolute top-3 right-3 bg-black/70 text-white rounded-full p-2 z-10 hover:bg-black transition",children:e.jsx(N,{size:18})}),e.jsxs("div",{className:"grid md:grid-cols-[1.2fr_1fr] gap-0 md:gap-6 h-full",children:[e.jsxs("div",{className:"bg-gray-50 flex flex-col",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:i&&e.jsx("img",{src:i.url,alt:`${r.nome} - ${i.label}`,className:"max-h-[340px] md:max-h-[560px] w-auto object-contain",loading:"eager"})}),s.length>1&&e.jsx("div",{className:"border-t border-gray-200 px-4 py-3 flex gap-2 overflow-x-auto",children:s.map((a,t)=>e.jsxs("button",{type:"button",onClick:()=>g(t),className:`relative flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border ${t===x?"border-primary ring-2 ring-primary/40":"border-gray-200 hover:border-gray-300"}`,title:a.label,children:[e.jsx("img",{src:o(a.url,"thumbnail"),alt:a.label,className:"w-full h-full object-cover",loading:"lazy"}),a.variation&&e.jsx("span",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-[10px] text-white px-1 py-0.5 text-center truncate",children:a.variation.cor})]},`${a.label}-${t}`))})]}),e.jsxs("div",{className:"p-5 md:p-6 flex flex-col overflow-y-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"font-bold text-2xl text-gray-800 mb-1",children:r.nome}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Cód: ",r.id]})]}),r.descricao&&e.jsx("p",{className:"text-sm text-gray-700 mb-4 whitespace-pre-line",children:r.descricao}),r.categorias?.length>0&&e.jsx("div",{className:"mb-4 flex flex-wrap gap-2",children:r.categorias.map(a=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs font-semibold text-gray-700",children:a},a))}),r.variacoes?.length?e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Cores disponíveis"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.variacoes?.map(a=>{const t=s[x]?.variation?.cor===a.cor;return e.jsx("button",{type:"button",onClick:()=>{const l=s.findIndex(y=>y.variation?.cor===a.cor);l>=0&&g(l)},className:`px-3 py-1 rounded-full text-xs font-semibold border transition ${t?"bg-primary text-white border-primary":"bg-white text-gray-800 border-gray-300 hover:bg-gray-50"}`,children:a.cor},a.cor)})})]}):null,e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-2",children:"Quantidade"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:p,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors border border-gray-300",children:e.jsx(w,{size:18,className:"text-gray-600"})}),e.jsx("input",{type:"number",min:"1",value:d,onChange:f,className:"w-20 text-center px-3 py-2 bg-gray-50 text-gray-800 text-base font-bold rounded-lg border-2 border-gray-300 focus:border-primary focus:outline-none"}),e.jsx("button",{type:"button",onClick:u,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors border border-gray-300",children:e.jsx(k,{size:18,className:"text-gray-600"})})]})]}),e.jsxs("div",{className:"mt-auto pt-4 flex gap-3",children:[e.jsxs("button",{onClick:h,className:"flex-1 inline-flex items-center justify-center gap-2 bg-primary hover:opacity-90 text-white font-semibold py-3 px-4 rounded-lg transition",children:[e.jsx(v,{size:18}),"Adicionar ao orçamento"]}),e.jsx("button",{onClick:c,className:"px-4 py-3 rounded-lg border border-gray-300 text-sm font-semibold text-gray-800 hover:bg-gray-50 transition",children:"Fechar"})]})]})]})]})})});export{Q as default};
