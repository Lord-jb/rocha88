import{a as j,b as v,d as N,j as e}from"./Providers.xGLPAwM3.js";import{r as m}from"./index.Ba-IbuDT.js";import{u as w,S as C}from"./Home.LCAjuRqf.js";import{c as $,o as k}from"./createLucideIcon.BjkHRYOJ.js";import{X as z}from"./x.wBzUDWHC.js";import{M as S,P as q}from"./plus.CvorEbqV.js";import{T as E}from"./trash-2.D7iKBQ7P.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=$("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function A(){const{items:n,isOpen:p,toggle:i,remove:g,clear:x,updateQuantity:d}=w(),[h,f]=m.useState("5589994333316"),[t,o]=m.useState({name:"",doc:"",address:"",cep:"",obs:""});m.useEffect(()=>{b()},[]);const b=async()=>{try{const r=await j(v(N,"config","general"));if(r.exists()){const a=r.data();a.whatsappNumber&&f(a.whatsappNumber)}}catch(r){console.error("Erro ao carregar Contato:",r)}},c=n.reduce((r,a)=>r+a.quantity,0),y=r=>{r.preventDefault();let a=`*Orçamento - Rocha Brindes*

`;a+=`*Cliente:* ${t.name}
`,a+=`*Contato:* ${t.doc}
`,a+=`*Endereço:* ${t.address}
`,a+=`*CEP:* ${t.cep}

`,a+=`*Produtos:*
`,n.forEach(s=>{a+=`• ${s.nome} (Cód: ${s.id})`,s.cor&&(a+=` - Cor: ${s.cor}`),a+=` - Qtd: ${s.quantity}
`}),t.obs&&(a+=`
*Observações:* ${t.obs}`);const l=`https://wa.me/${h}?text=${encodeURIComponent(a)}`;window.open(l,"_blank"),x(),i(),o({name:"",doc:"",address:"",cep:"",obs:""})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-dark/60 backdrop-blur-sm z-50 transition-opacity duration-300 ${p?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:i}),e.jsx("aside",{className:`fixed top-0 right-0 h-full w-full max-w-lg bg-white z-50 shadow-2xl transform transition-transform duration-300 ${p?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-primary to-primary-dark",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-title font-bold text-white",children:"Seu Orçamento"}),c>0&&e.jsxs("p",{className:"text-white/80 text-sm mt-1",children:[c," ",c===1?"item":"itens"]})]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-white/20 rounded-full transition-all duration-200",children:e.jsx(z,{size:24,className:"text-white"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-light",children:n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:e.jsx(C,{size:40,className:"text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Nenhum produto adicionado"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Adicione produtos para solicitar um orçamento"})]}):e.jsxs(e.Fragment,{children:[n.map(r=>{let a=r.thumb_url||r.imagem_url;if(r.cor&&r.variacoes?.length){const s=r.variacoes.find(u=>u.cor===r.cor);s&&(a=s.thumb_url||s.imagem_url||a)}!a&&r.variacoes?.[0]&&(a=r.variacoes[0].thumb_url||r.variacoes[0].imagem_url);const l=a?k(a,"public"):"";return e.jsxs("div",{className:"flex gap-4 bg-white p-4 rounded-xl shadow-card hover:shadow-card-hover transition-all duration-200",children:[l?e.jsx("img",{src:l,alt:r.nome,className:"w-20 h-20 object-contain rounded-lg bg-gray-50",loading:"lazy"}):e.jsx("div",{className:"w-20 h-20 flex items-center justify-center bg-gray-100 rounded-lg",children:e.jsx("span",{className:"text-xs text-gray-400",children:"Sem img"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 text-dark mb-1",children:r.nome}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Cód: ",r.id]}),r.cor&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Cor:"}),e.jsx("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-gray-100 rounded-md",children:e.jsx("span",{className:"text-xs font-medium text-gray-700",children:r.cor})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(r.id,Math.max(1,r.quantity-1)),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(S,{size:14,className:"text-gray-600"})}),e.jsx("input",{type:"number",min:"1",value:r.quantity,onChange:s=>{const u=parseInt(s.target.value)||1;d(r.id,Math.max(1,u))},className:"w-16 text-center px-2 py-1.5 bg-primary/10 text-primary text-sm font-bold rounded-lg border-2 border-transparent focus:border-primary focus:outline-none"}),e.jsx("button",{onClick:()=>d(r.id,r.quantity+1),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(q,{size:14,className:"text-gray-600"})})]})]}),e.jsx("button",{onClick:()=>g(r.id),className:"text-red-500 hover:bg-red-50 p-2 rounded-lg h-fit transition-all duration-200",children:e.jsx(E,{size:18})})]},`${r.id}-${r.cor||"default"}`)}),e.jsx("button",{onClick:x,className:"w-full py-3 text-red-500 hover:bg-red-50 rounded-xl font-medium transition-all duration-200 border-2 border-red-200",children:"Limpar carrinho"})]})}),n.length>0&&e.jsxs("form",{onSubmit:y,className:"p-6 border-t space-y-3 bg-white shadow-lg",children:[e.jsx("input",{type:"text",placeholder:"Nome completo",value:t.name,onChange:r=>o({...t,name:r.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",required:!0}),e.jsx("input",{type:"text",placeholder:"Contato",value:t.doc,onChange:r=>o({...t,doc:r.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",required:!0}),e.jsx("input",{type:"text",placeholder:"Endereço",value:t.address,onChange:r=>o({...t,address:r.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",required:!0}),e.jsx("input",{type:"text",placeholder:"CEP",value:t.cep,onChange:r=>o({...t,cep:r.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all",required:!0}),e.jsx("textarea",{placeholder:"Observações (opcional)",value:t.obs,onChange:r=>o({...t,obs:r.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all resize-none"}),e.jsxs("button",{type:"submit",className:"w-full py-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-title font-bold text-lg hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02] flex items-center justify-center gap-2",children:[e.jsx(_,{size:20}),"Finalizar no WhatsApp"]})]})]})})]})}export{A as default};
